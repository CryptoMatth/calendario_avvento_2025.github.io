<!DOCTYPE html>

<html lang="it">

	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" /> <!-- assicura che il sito sia responsivo e si adatti alla larghezza dello schermo del dispositivo. -->
		<title>Calendario dell'Avvento - Costellazioni</title>
		<script src="https://cdn.tailwindcss.com"></script> <!-- imposta il titolo della pagina che appare nella scheda del browser -->
		
		<style> <!-- definisce un set di variabili CSS per colori base, semplificando la gestione dei colori in tutto il sito -->
		  :root {
			/* Primitive Color Tokens */
			--color-white: rgba(255, 255, 255, 1);
			--color-black: rgba(0, 0, 0, 1);
			--color-cream-50: rgba(252, 252, 249, 1);
			--color-cream-100: rgba(255, 255, 253, 1);
			--color-gray-200: rgba(245, 245, 245, 1);
			--color-gray-300: rgba(167, 169, 169, 1);
			--color-gray-400: rgba(119, 124, 124, 1);
			--color-slate-500: rgba(98, 108, 108, 1);
			--color-red-500: rgba(239, 68, 68, 1);
			--color-green-500: rgba(34, 197, 94, 1);
			--color-green-600: rgba(22, 163, 74, 1);
			--color-green-700: rgba(21, 128, 61, 1);
			--color-orange-500: rgba(249, 115, 22, 1);
			--color-blue-500: rgba(59, 130, 246, 1);
			
			/* Semantic Color Tokens */
			--color-primary: var(--color-green-600);
			--color-primary-hover: var(--color-green-700);
			--color-secondary: var(--color-red-500);
			--color-background: var(--color-cream-100);
			--color-surface: var(--color-white);
			--color-text-primary: var(--color-slate-500);
			--color-text-secondary: var(--color-gray-400);
			--color-text-white: var(--color-white);
			--color-border: var(--color-gray-200);
			--color-success: var(--color-green-500);
			--color-error: var(--color-red-500);
			--color-warning: var(--color-orange-500);
			
			/* Tailwind Customization */
			--tw-ring-color: var(--color-primary);
		  }
		  
		  /* Utility Classes for Tailwind */
		  .bg-primary { background-color: var(--color-primary); }
		  .hover\:bg-primary-hover:hover { background-color: var(--color-primary-hover); }
		  .text-primary { color: var(--color-primary); }
		  .bg-secondary { background-color: var(--color-secondary); }
		  .bg-background { background-color: var(--color-background); }
		  .text-text-primary { color: var(--color-text-primary); }
		  
		  /* Global Styles */
		  body {
			font-family: 'Inter', sans-serif;
			background-color: var(--color-background);
			min-height: 100vh;
		  }
		  
		  /* Custom Toast Styles */
		  #toastContainer {
			position: fixed;
			top: 1rem;
			right: 1rem;
			z-index: 1000;
			display: flex;
			flex-direction: column;
			gap: 0.5rem;
			max-width: 300px;
		  }
		  .toast {
			padding: 0.75rem 1rem;
			border-radius: 0.5rem;
			box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
			color: var(--color-text-white);
			transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
			opacity: 0;
			transform: translateX(100%);
		  }
		  .toast.show {
			opacity: 1;
			transform: translateX(0);
		  }
		  .toast.success { background-color: var(--color-success); }
		  .toast.error { background-color: var(--color-error); }
		  .toast.warning { background-color: var(--color-warning); }
		  
		  /* Button styles */
		  .advent-button {
			background-color: var(--color-primary);
			color: var(--color-text-white);
			padding: 0.75rem 1.5rem;
			border-radius: 0.75rem;
			font-weight: 600;
			transition: background-color 0.2s, transform 0.1s;
			box-shadow: 0 4px var(--color-green-700);
		  }
		  .advent-button:hover {
			background-color: var(--color-primary-hover);
		  }
		  .advent-button:active {
			transform: translateY(2px);
			box-shadow: 0 2px var(--color-green-700);
		  }
		  .advent-button:disabled {
			background-color: var(--color-gray-300);
			box-shadow: none;
			cursor: not-allowed;
			transform: none;
		  }
		  
		  /* Grid for days */
		  .advent-grid {
			display: grid;
			grid-template-columns: repeat(4, 1fr);
			gap: 1rem;
			padding: 1rem;
		  }
		  
		  @media (min-width: 640px) {
			.advent-grid {
			  grid-template-columns: repeat(6, 1fr);
			}
		  }
		  
		  @media (min-width: 1024px) {
			.advent-grid {
			  grid-template-columns: repeat(8, 1fr);
			}
		  }
		  
		  /* Day Card */
		  .day-card {
			background-color: var(--color-surface);
			border-radius: 1rem;
			box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: center;
			padding: 1rem;
			aspect-ratio: 1 / 1;
			cursor: pointer;
			transition: transform 0.2s, box-shadow 0.2s;
			position: relative;
			overflow: hidden;
		  }
		  
		  .day-card:hover:not(.locked) {
			transform: scale(1.05);
			box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
		  }
		  
		  .day-card.locked {
			background-color: var(--color-gray-200);
			color: var(--color-gray-300);
			cursor: not-allowed;
		  }
		  
		  .day-card.unlocked {
			border: 2px solid var(--color-primary);
		  }
		  
		  .day-card.completed {
			background-color: #f0fdf4; /* A light green for completion */
			border: 2px solid var(--color-success);
			color: var(--color-success);
		  }
		  
		  .day-number {
			font-size: 1.5rem;
			font-weight: 800;
			z-index: 10;
		  }
		  
		  /* Overlay for locked state */
		  .day-card.locked::after {
			content: 'üîí';
			position: absolute;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
			font-size: 2.5rem;
			opacity: 0.5;
		  }
		  
		  /* Constellation Icon Placeholder (Star) */
		  .constellation-icon {
			font-size: 2rem;
			line-height: 1;
			margin-top: 0.5rem;
			color: var(--color-primary);
		  }
		  .day-card.completed .constellation-icon {
			color: var(--color-success);
		  }
		  .day-card.locked .constellation-icon {
			color: var(--color-gray-300);
		  }
		  
		  /* Modal Styles */
		  .modal-overlay {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background-color: rgba(0, 0, 0, 0.7);
			display: flex;
			align-items: center;
			justify-content: center;
			z-index: 50;
			transition: opacity 0.3s;
		  }
		  .modal-content {
			background-color: var(--color-surface);
			border-radius: 1rem;
			padding: 2rem;
			max-width: 90%;
			max-height: 90%;
			overflow-y: auto;
			box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
			transform: scale(0.9);
			opacity: 0;
			transition: transform 0.3s, opacity 0.3s;
		  }
		  .modal-overlay.show .modal-content {
			transform: scale(1);
			opacity: 1;
		  }
		  
		  /* Leaderboard Styles */
		  #leaderboardModal .modal-content {
			max-width: 400px;
		  }
		  .leaderboard-item {
			display: flex;
			justify-content: space-between;
			align-items: center;
			padding: 0.5rem 0;
			border-bottom: 1px solid var(--color-border);
		  }
		  .leaderboard-item:last-child {
			border-bottom: none;
		  }
		  .leaderboard-rank {
			font-weight: 700;
			width: 20px;
			text-align: center;
		  }
		  .leaderboard-score {
			font-weight: 700;
			color: var(--color-primary);
		  }
		  
		</style>
		
		<!-- Font Awesome for Icons -->
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
		
		<!-- React Libraries -->
		<script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
		<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
		<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
		
		<!-- Firebase SDK (Version 11.6.1) -->
		<script type="module">
		  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
		  import { getAuth, signInAnonymously, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
		  import { getFirestore, doc, setDoc, getDoc, collection, query, orderBy, limit, getDocs } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
		  import { getStorage, ref, uploadString, getDownloadURL } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-storage.js";

		  // Global variables
		  window.db = null;
		  window.auth = null;
		  window.storage = null;
		  window.userId = null;
		  window.COLLECTION_NAME = 'advent_calendar_progress';
		  window.LEADERBOARD_COLLECTION = 'advent_leaderboard';
		  
		  // Firebase Configuration (Injected by Canvas)
		  const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
		  const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : null;
		  const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;
		  
		  if (firebaseConfig) {
			const app = initializeApp(firebaseConfig);
			window.db = getFirestore(app);
			window.auth = getAuth(app);
			// window.storage = getStorage(app); // Storage non necessario per ora
			
			// Authentication
			async function authenticate() {
			  try {
				if (initialAuthToken) {
				  const userCredential = await signInWithCustomToken(window.auth, initialAuthToken);
				  window.userId = userCredential.user.uid;
				  console.log('‚úÖ Autenticazione con token personalizzato riuscita. User ID:', window.userId);
				} else {
				  const userCredential = await signInAnonymously(window.auth);
				  window.userId = userCredential.user.uid;
				  console.log('‚úÖ Autenticazione anonima riuscita. User ID:', window.userId);
				}
			  } catch (error) {
				console.error('‚ùå Errore durante l\'autenticazione:', error);
				showToast('Errore di autenticazione critico.', 'error');
			  }
			}
			
			// Esegui autenticazione all'avvio
			authenticate();
		  } else {
			console.warn('‚ö†Ô∏è Configurazione Firebase non trovata. L\'app funzioner√† in modalit√† offline/simulata.');
		  }
		</script>
	</head>
	
	<body>
		<div id="toastContainer"></div>
		
		<div id="mainApp" class="hidden min-h-screen flex flex-col items-center justify-center p-4 bg-background">
			<div id="app" class="w-full max-w-4xl">
				<!-- Il contenuto React verr√† montato qui -->
			</div>
			
			<!-- Modal per il Contenuto -->
			<div id="contentModal" class="modal-overlay hidden" onclick="window.closeContentModal()">
				<div class="modal-content" onclick="event.stopPropagation()">
					<h2 id="modalTitle" class="text-2xl font-bold mb-4 text-text-primary"></h2>
					<p id="modalDescription" class="mb-6 text-text-primary"></p>
					<div class="flex justify-end">
						<button class="advent-button" onclick="window.closeContentModal()">Chiudi</button>
					</div>
				</div>
			</div>
			
			<!-- Modal per la Classifica -->
			<div id="leaderboardModal" class="modal-overlay hidden" onclick="window.closeLeaderboardModal()">
				<div class="modal-content" onclick="event.stopPropagation()">
					<h2 class="text-2xl font-bold mb-4 text-text-primary">üèÜ Classifica Costellazioni</h2>
					<div id="leaderboardList" class="flex flex-col gap-2">
						<!-- Elementi classifica inseriti qui -->
						<p class="text-gray-400">Caricamento...</p>
					</div>
					<div class="mt-6 flex justify-end">
						<button class="advent-button" onclick="window.closeLeaderboardModal()">Chiudi</button>
					</div>
				</div>
			</div>
		</div>
		
		
		
		<script type="text/babel">
		  // Array di dati simulati per i giorni
		  const ADVENT_DAYS_DATA = Array.from({ length: 24 }, (_, i) => ({
			day: i + 1,
			title: `Costellazione del Giorno ${i + 1}`,
			description: `Oggi esploriamo la costellazione ${i + 1}. Scopri i suoi miti e le sue stelle principali.`,
			icon: '‚≠ê', // Placeholder icon
			isCompleted: false, // Sar√† aggiornato dallo stato
		  }));
		  
		  // Stato Globale e Funzioni di Interazione
		  
		  // Funzione per mostrare un toast (la definiamo fuori da React)
		  window.showToast = (message, type = 'info') => {
			const container = document.getElementById('toastContainer');
			if (!container) return;

			const toast = document.createElement('div');
			toast.className = `toast ${type}`;
			toast.textContent = message;
			
			container.prepend(toast);
			
			// Forza il reflow per l'animazione
			void toast.offsetWidth; 
			toast.classList.add('show');
			
			setTimeout(() => {
			  toast.classList.remove('show');
			  toast.addEventListener('transitionend', () => toast.remove());
			}, 3000);
		  };
		  
		  // Funzione per chiudere i modali (usate globalmente)
		  window.closeContentModal = () => {
			document.getElementById('contentModal').classList.add('hidden');
			document.getElementById('contentModal').classList.remove('show');
		  };
		  
		  window.closeLeaderboardModal = () => {
			document.getElementById('leaderboardModal').classList.add('hidden');
		  };
		  
		  // --- Componenti React ---
		  
		  const { useState, useEffect, useCallback, useMemo } = React;
		  
		  // Componente per il singolo giorno
		  function AdventDay({ day, title, description, icon, isCompleted, isAvailable, onDayClick }) {
			const className = `day-card ${isCompleted ? 'completed' : isAvailable ? 'unlocked' : 'locked'} transition-all`;
			
			const handleClick = () => {
			  if (isAvailable) {
				onDayClick(day, title, description);
			  } else {
				showToast('Questo giorno non √® ancora disponibile!', 'warning');
			  }
			};

			return (
			  <div className={className} onClick={handleClick}>
				<div className="day-number">{day}</div>
				{isCompleted && <div className="constellation-icon">{icon}</div>}
				{!isCompleted && isAvailable && <div className="constellation-icon">‚≠ê</div>}
			  </div>
			);
		  }
		  
		  // Componente principale dell'App
		  const App = () => {
			const [progress, setProgress] = useState({});
			const [loading, setLoading] = useState(true);
			const currentDay = useMemo(() => new Date().getDate(), []);
			// Simula il mese di dicembre per l'avvento
			const isDecember = useMemo(() => new Date().getMonth() === 11, []);
			
			// Riferimenti ai percorsi Firestore
			const getDayDocPath = useCallback((day) => {
				const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
				const collectionPath = `artifacts/${appId}/users/${window.userId}/${window.COLLECTION_NAME}`;
				return doc(window.db, collectionPath, `day_${day}`);
			}, []);
			
			const getLeaderboardDocPath = useCallback(() => {
				const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
				const collectionPath = `artifacts/${appId}/public/data/${window.LEADERBOARD_COLLECTION}`;
				return doc(window.db, collectionPath, window.userId); // Documento specifico per l'utente nella classifica pubblica
			}, []);
			
			const saveProgress = useCallback(async (newProgress) => {
			  if (!window.db || !window.userId) {
				console.warn('‚ö†Ô∏è Firebase non pronto, salvataggio non eseguito.');
				return;
			  }
			  
			  try {
				// Salvataggio del progresso giorno per giorno
				for (const day in newProgress) {
					const dayDocRef = getDayDocPath(day);
					await setDoc(dayDocRef, { 
						completed: newProgress[day].completed, 
						timestamp: new Date() 
					}, { merge: true });
				}
				
				setProgress(newProgress);
				console.log('‚úÖ Progresso salvato con successo per', Object.keys(newProgress).length, 'giorni.');
				
				// Aggiornamento classifica dopo salvataggio
				await updateLeaderboard(newProgress);
				
			  } catch (error) {
				console.error('‚ùå Errore durante il salvataggio del progresso:', error);
				showToast('Errore salvataggio progresso.', 'error');
			  }
			}, [getDayDocPath]);
			
			const loadProgress = useCallback(async () => {
			  if (!window.db || !window.userId) {
				console.warn('‚ö†Ô∏è Firebase non pronto, caricamento non eseguito.');
				return {};
			  }
			  
			  try {
				const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
				const collectionPath = `artifacts/${appId}/users/${window.userId}/${window.COLLECTION_NAME}`;
				const q = collection(window.db, collectionPath);
				const querySnapshot = await getDocs(q);
				
				const loadedProgress = {};
				querySnapshot.forEach((doc) => {
					const dayNumber = parseInt(doc.id.replace('day_', ''), 10);
					loadedProgress[dayNumber] = doc.data();
				});
				
				console.log('‚úÖ Progresso caricato:', Object.keys(loadedProgress).length, 'giorni.');
				return loadedProgress;
				
			  } catch (error) {
				console.error('‚ùå Errore durante il caricamento del progresso:', error);
				showToast('Errore caricamento progresso.', 'error');
				return {};
			  }
			}, []);
			
			const updateLeaderboard = useCallback(async (currentProgress) => {
				if (!window.db || !window.userId) return;
				
				try {
					const score = Object.values(currentProgress).filter(p => p.completed).length;
					const leaderboardDocRef = getLeaderboardDocPath();
					
					// Nome utente simulato/anonimo per la classifica (usa una parte dell'ID)
					const username = `Explorer-${window.userId.substring(0, 6)}`;
					
					await setDoc(leaderboardDocRef, {
						userId: window.userId,
						username: username,
						score: score,
						lastUpdated: new Date()
					}, { merge: true });
					
					console.log('‚úÖ Classifica aggiornata. Punteggio:', score);
				} catch (error) {
					console.error('‚ùå Errore aggiornamento classifica:', error);
					showToast('Errore aggiornamento classifica.', 'error');
				}
			}, [getLeaderboardDocPath]);
			
			useEffect(() => {
			  // Inizializzazione dati e caricamento
			  if (window.db && window.userId && loading) {
				loadProgress().then(loadedProgress => {
				  setProgress(loadedProgress);
				  updateLeaderboard(loadedProgress);
				  setLoading(false);
				});
			  }
			}, [loadProgress, updateLeaderboard, loading]);
			
			// Gestore Click su Giorno
			const handleDayClick = useCallback((day, title, description) => {
			  // 1. Mostra il contenuto del giorno nel modale
			  document.getElementById('modalTitle').textContent = title;
			  document.getElementById('modalDescription').textContent = description;
			  const modal = document.getElementById('contentModal');
			  modal.classList.remove('hidden');
			  // Forza un reflow per l'animazione
			  void modal.offsetWidth;
			  modal.classList.add('show');
			  
			  // 2. Marca il giorno come completato
			  const newProgress = { 
				...progress, 
				[day]: { completed: true, timestamp: new Date() }
			  };
			  
			  // 3. Salva il nuovo progresso in Firestore
			  saveProgress(newProgress);
			  
			  showToast(`Hai esplorato la ${title}! Complimenti.`, 'success');
			}, [progress, saveProgress]);
			
			// Renderizza i giorni
			const adventDays = useMemo(() => ADVENT_DAYS_DATA.map(dayData => {
			  const isCompleted = progress[dayData.day]?.completed || false;
			  // Un giorno √® disponibile se siamo in Dicembre E il giorno corrente √® >= del giorno della casella
			  const isAvailable = isDecember && currentDay >= dayData.day;
			  
			  return (
				<AdventDay
				  key={dayData.day}
				  {...dayData}
				  isCompleted={isCompleted}
				  isAvailable={isAvailable}
				  onDayClick={handleDayClick}
				/>
			  );
			}), [progress, currentDay, isDecember, handleDayClick]);
			
			
			if (loading || !window.userId) {
			  return (
				<div className="flex items-center justify-center p-8 bg-surface rounded-xl shadow-lg">
				  <i className="fas fa-spinner fa-spin text-primary mr-3"></i>
				  <span className="text-text-primary font-medium">Caricamento progressi...</span>
				</div>
			  );
			}
			
			return (
			  <div className="bg-surface rounded-xl shadow-2xl p-6 md:p-10 w-full">
				<h1 className="text-3xl font-extrabold text-primary mb-2 text-center">Calendario dell'Avvento Stellare üéÑ</h1>
				<p className="text-center text-text-secondary mb-6">Apri una casella ogni giorno (fino al {currentDay} se siamo in Dicembre)!</p>
				
				<div className="flex justify-center space-x-4 mb-8">
					<button 
						className="advent-button flex items-center"
						onClick={window.showLeaderboardModal}
						disabled={!window.db}
					>
						<i className="fas fa-trophy mr-2"></i> Classifica
					</button>
					<div className="advent-button bg-gray-400 cursor-default shadow-none">
						<i className="fas fa-user mr-2"></i> {`ID Utente: ${window.userId ? window.userId.substring(0, 8) + '...' : 'Anonimo'}`}
					</div>
				</div>
				
				<div className="advent-grid">
				  {adventDays}
				</div>
				
			  </div>
			);
		  };
		  
		  // Funzione per caricare e mostrare la classifica
		  window.showLeaderboardModal = async () => {
			const modal = document.getElementById('leaderboardModal');
			const listContainer = document.getElementById('leaderboardList');
			
			if (!window.db) {
				showToast('La classifica richiede una connessione al database.', 'error');
				return;
			}
			
			listContainer.innerHTML = '<p class="text-gray-400 flex items-center"><i class="fas fa-spinner fa-spin mr-2"></i>Caricamento classifica...</p>';
			modal.classList.remove('hidden');

			try {
				const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
				const collectionPath = `artifacts/${appId}/public/data/${window.LEADERBOARD_COLLECTION}`;
				
				// Query per i primi 10, ordinati per score decrescente
				const q = query(
					collection(window.db, collectionPath),
					// NOTE: L'uso di orderBy √® disabilitato come da istruzioni, si ordina lato client.
					// orderBy('score', 'desc'), 
					// limit(10)
				);
				
				const querySnapshot = await getDocs(q);
				
				let results = [];
				querySnapshot.forEach((doc) => {
					results.push(doc.data());
				});
				
				// Ordina i risultati lato client
				results.sort((a, b) => b.score - a.score);
				const topResults = results.slice(0, 10);
				
				if (topResults.length === 0) {
					listContainer.innerHTML = '<p class="text-text-secondary">Nessun punteggio ancora registrato.</p>';
					return;
				}
				
				listContainer.innerHTML = topResults.map((item, index) => {
					const rank = index + 1;
					const isUser = item.userId === window.userId;
					const itemClass = isUser ? 'bg-yellow-100 font-bold rounded-lg px-2' : '';
					
					return `
						<div class="leaderboard-item ${itemClass}">
							<span class="leaderboard-rank">${rank}</span>
							<span class="flex-grow ml-3 text-text-primary">${item.username} ${isUser ? '(Tu)' : ''}</span>
							<span class="leaderboard-score">${item.score}</span>
						</div>
					`;
				}).join('');
				
				showToast('Classifica aggiornata.', 'success');
				
			} catch (error) {
			  console.error('‚ùå Errore caricamento classifica:', error);
			  showToast('Errore caricamento classifica', 'error');
			  listContainer.innerHTML = '<p class="text-error">Errore nel caricamento della classifica.</p>';
			}
		  };
		  
		  // Inizializzazione semplificata
		  function initializeApp() {
			console.log('üöÄ Inizializzando Calendario dell\'Avvento semplificato...');
			
			// Carica progresso dalla memoria se presente
			/* La logica di caricamento √® stata spostata nel componente React
			const progress = loadProgress();
			if (Object.keys(progress).length > 0) {
			  console.log('üíæ Progressi trovati in memoria JavaScript:', Object.keys(progress).length, 'giorni');
			}
			*/
		  }
	  
		  // Inizializzazione DOM semplificata
		  document.addEventListener('DOMContentLoaded', function() {
			console.log('üöÄ DOM caricato, avvio calendario semplificato...');
			
			initializeApp();
			
			// Nascondi elementi non necessari e mostra app
			const mainApp = document.getElementById('mainApp');
			if (mainApp) {
			  mainApp.style.display = 'flex';
			}
			
			// Avvia app React direttamente
			try {
			  const container = document.getElementById('app');
			  if (container) {
				const root = ReactDOM.createRoot(container);
				root.render(React.createElement(App));
				console.log('‚úÖ App calendario inizializzata con successo');
				
				setTimeout(() => {
				  showToast('üéÑ Calendario dell\'Avvento caricato! Buon divertimento!', 'success');
				}, 1000);
			  }
			} catch (error) {
			  console.error('‚ùå Errore critico nell\'avvio dell\'app React:', error);
			  showToast('Errore critico nell\'avvio dell\'app.', 'error');
			}
		  });
		</script>
	</body>
</html>
